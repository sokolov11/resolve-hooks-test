{"version":3,"sources":["../src/view_models_saga.js"],"names":["viewModelsSaga","sagaArgs","connectionManager","wildcardSymbol","sagaManager","CONNECT_VIEWMODEL","DISCONNECT_VIEWMODEL","action","type","viewModelName","aggregateIds","aggregateArgs","sagaKey","start","connectViewModelSaga","disconnectViewModelSaga"],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,cAAc;AAAA;AAAA,6BAAG,SAAjBA,cAAiB,CAAUC,QAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfC,UAAAA,iBADe,GACK,2CAAwB;AAAEC,YAAAA,cAAc,EAAE;AAAlB,WAAxB,CADL;AAEfC,UAAAA,WAFe,GAED,sCAFC;;AAAA;AAAA,eAId,IAJc;AAAA;AAAA;AAAA;;AAAA;AAKJ,iBAAM,mBAAK,CAACC,+BAAD,EAAoBC,kCAApB,CAAL,CAAN;;AALI;AAKbC,UAAAA,MALa;AAAA,wBAOXA,MAAM,CAACC,IAPI;AAAA,0CAQZH,+BARY,uBA4BZC,kCA5BY;AAAA;;AAAA;AASPG,UAAAA,aATO,GASwCF,MATxC,CASPE,aATO,EASQC,YATR,GASwCH,MATxC,CASQG,YATR,EASsBC,aATtB,GASwCJ,MATxC,CASsBI,aATtB;AAUTC,UAAAA,OAVS,GAUC,0BAAQ;AACtBH,YAAAA,aAAa,EAAbA,aADsB;AAEtBC,YAAAA,YAAY,EAAZA,YAFsB;AAGtBC,YAAAA,aAAa,EAAbA;AAHsB,WAAR,CAVD;AAef,wCAAOP,WAAW,CAACS,KAAZ,MACFR,+BADE,GACkBO,OADlB,EAELE,mCAFK,oBAIAb,QAJA;AAKHC,YAAAA,iBAAiB,EAAjBA,iBALG;AAMHE,YAAAA,WAAW,EAAXA,WANG;AAOHQ,YAAAA,OAAO,EAAPA;AAPG,cASLL,MATK,CAAP;;AAfe;AAAA;;AAAA;AA6BPE,UAAAA,cA7BO,GA6BwCF,MA7BxC,CA6BPE,aA7BO,EA6BQC,aA7BR,GA6BwCH,MA7BxC,CA6BQG,YA7BR,EA6BsBC,cA7BtB,GA6BwCJ,MA7BxC,CA6BsBI,aA7BtB;AA8BTC,UAAAA,QA9BS,GA8BC,0BAAQ;AACtBH,YAAAA,aAAa,EAAbA,cADsB;AAEtBC,YAAAA,YAAY,EAAZA,aAFsB;AAGtBC,YAAAA,aAAa,EAAbA;AAHsB,WAAR,CA9BD;AAmCf,wCAAOP,WAAW,CAACS,KAAZ,MACFP,kCADE,GACqBM,QADrB,EAELG,sCAFK,oBAIAd,QAJA;AAKHC,YAAAA,iBAAiB,EAAjBA,iBALG;AAMHE,YAAAA,WAAW,EAAXA,WANG;AAOHQ,YAAAA,OAAO,EAAPA;AAPG,cASLL,MATK,CAAP;;AAnCe;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjBP,cAAiB;AAAA,CAAH,CAApB;;eAqDeA,c","sourcesContent":["import { take } from 'redux-saga/effects'\n\nimport getHash from './get_hash'\nimport createConnectionManager from './create_connection_manager'\nimport createSagaManager from './create_saga_manager'\nimport { CONNECT_VIEWMODEL, DISCONNECT_VIEWMODEL } from './action_types'\nimport connectViewModelSaga from './connect_view_model_saga'\nimport disconnectViewModelSaga from './disconnect_view_model_saga'\n\nconst viewModelsSaga = function*(sagaArgs) {\n  const connectionManager = createConnectionManager({ wildcardSymbol: null })\n  const sagaManager = createSagaManager()\n\n  while (true) {\n    const action = yield take([CONNECT_VIEWMODEL, DISCONNECT_VIEWMODEL])\n\n    switch (action.type) {\n      case CONNECT_VIEWMODEL: {\n        const { viewModelName, aggregateIds, aggregateArgs } = action\n        const sagaKey = getHash({\n          viewModelName,\n          aggregateIds,\n          aggregateArgs\n        })\n        yield* sagaManager.start(\n          `${CONNECT_VIEWMODEL}${sagaKey}`,\n          connectViewModelSaga,\n          {\n            ...sagaArgs,\n            connectionManager,\n            sagaManager,\n            sagaKey\n          },\n          action\n        )\n        break\n      }\n      case DISCONNECT_VIEWMODEL: {\n        const { viewModelName, aggregateIds, aggregateArgs } = action\n        const sagaKey = getHash({\n          viewModelName,\n          aggregateIds,\n          aggregateArgs\n        })\n        yield* sagaManager.start(\n          `${DISCONNECT_VIEWMODEL}${sagaKey}`,\n          disconnectViewModelSaga,\n          {\n            ...sagaArgs,\n            connectionManager,\n            sagaManager,\n            sagaKey\n          },\n          action\n        )\n        break\n      }\n      default:\n    }\n  }\n}\n\nexport default viewModelsSaga\n"],"file":"view_models_saga.js"}