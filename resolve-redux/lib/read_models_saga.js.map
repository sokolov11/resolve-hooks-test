{"version":3,"sources":["../src/read_models_saga.js"],"names":["readModelsSaga","sagaArgs","connectionManager","wildcardSymbol","sagaManager","CONNECT_READMODEL","DISCONNECT_READMODEL","action","type","readModelName","resolverName","resolverArgs","sagaKey","start","connectReadModelSaga","disconnectReadModelSaga"],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,cAAc;AAAA;AAAA,6BAAG,SAAjBA,cAAiB,CAAUC,QAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfC,UAAAA,iBADe,GACK,2CAAwB;AAAEC,YAAAA,cAAc,EAAE;AAAlB,WAAxB,CADL;AAEfC,UAAAA,WAFe,GAED,sCAFC;;AAAA;AAAA,eAId,IAJc;AAAA;AAAA;AAAA;;AAAA;AAKJ,iBAAM,mBAAK,CAACC,+BAAD,EAAoBC,kCAApB,CAAL,CAAN;;AALI;AAKbC,UAAAA,MALa;AAAA,wBAOXA,MAAM,CAACC,IAPI;AAAA,0CAQZH,+BARY,uBA4BZC,kCA5BY;AAAA;;AAAA;AASPG,UAAAA,aATO,GASuCF,MATvC,CASPE,aATO,EASQC,YATR,GASuCH,MATvC,CASQG,YATR,EASsBC,YATtB,GASuCJ,MATvC,CASsBI,YATtB;AAUTC,UAAAA,OAVS,GAUC,0BAAQ;AACtBH,YAAAA,aAAa,EAAbA,aADsB;AAEtBC,YAAAA,YAAY,EAAZA,YAFsB;AAGtBC,YAAAA,YAAY,EAAZA;AAHsB,WAAR,CAVD;AAef,wCAAOP,WAAW,CAACS,KAAZ,MACFR,+BADE,GACkBO,OADlB,EAELE,mCAFK,oBAIAb,QAJA;AAKHC,YAAAA,iBAAiB,EAAjBA,iBALG;AAMHE,YAAAA,WAAW,EAAXA,WANG;AAOHQ,YAAAA,OAAO,EAAPA;AAPG,cASLL,MATK,CAAP;;AAfe;AAAA;;AAAA;AA6BPE,UAAAA,cA7BO,GA6BuCF,MA7BvC,CA6BPE,aA7BO,EA6BQC,aA7BR,GA6BuCH,MA7BvC,CA6BQG,YA7BR,EA6BsBC,aA7BtB,GA6BuCJ,MA7BvC,CA6BsBI,YA7BtB;AA8BTC,UAAAA,QA9BS,GA8BC,0BAAQ;AACtBH,YAAAA,aAAa,EAAbA,cADsB;AAEtBC,YAAAA,YAAY,EAAZA,aAFsB;AAGtBC,YAAAA,YAAY,EAAZA;AAHsB,WAAR,CA9BD;AAmCf,wCAAOP,WAAW,CAACS,KAAZ,MACFP,kCADE,GACqBM,QADrB,EAELG,sCAFK,oBAIAd,QAJA;AAKHC,YAAAA,iBAAiB,EAAjBA,iBALG;AAMHE,YAAAA,WAAW,EAAXA,WANG;AAOHQ,YAAAA,OAAO,EAAPA;AAPG,cASLL,MATK,CAAP;;AAnCe;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjBP,cAAiB;AAAA,CAAH,CAApB;;eAqDeA,c","sourcesContent":["import { take } from 'redux-saga/effects'\n\nimport getHash from './get_hash'\nimport createConnectionManager from './create_connection_manager'\nimport createSagaManager from './create_saga_manager'\nimport { CONNECT_READMODEL, DISCONNECT_READMODEL } from './action_types'\nimport connectReadModelSaga from './connect_read_model_saga'\nimport disconnectReadModelSaga from './disconnect_read_model_saga'\n\nconst readModelsSaga = function*(sagaArgs) {\n  const connectionManager = createConnectionManager({ wildcardSymbol: null })\n  const sagaManager = createSagaManager()\n\n  while (true) {\n    const action = yield take([CONNECT_READMODEL, DISCONNECT_READMODEL])\n\n    switch (action.type) {\n      case CONNECT_READMODEL: {\n        const { readModelName, resolverName, resolverArgs } = action\n        const sagaKey = getHash({\n          readModelName,\n          resolverName,\n          resolverArgs\n        })\n        yield* sagaManager.start(\n          `${CONNECT_READMODEL}${sagaKey}`,\n          connectReadModelSaga,\n          {\n            ...sagaArgs,\n            connectionManager,\n            sagaManager,\n            sagaKey\n          },\n          action\n        )\n        break\n      }\n      case DISCONNECT_READMODEL: {\n        const { readModelName, resolverName, resolverArgs } = action\n        const sagaKey = getHash({\n          readModelName,\n          resolverName,\n          resolverArgs\n        })\n        yield* sagaManager.start(\n          `${DISCONNECT_READMODEL}${sagaKey}`,\n          disconnectReadModelSaga,\n          {\n            ...sagaArgs,\n            connectionManager,\n            sagaManager,\n            sagaKey\n          },\n          action\n        )\n        break\n      }\n      default:\n    }\n  }\n}\n\nexport default readModelsSaga\n"],"file":"read_models_saga.js"}