{"version":3,"sources":["../src/create_store.js"],"names":["createStore","redux","reducers","middlewares","enhancers","sagas","customSagas","viewModels","subscribeAdapter","emptySubscribeAdapter","initialState","undefined","jwtProvider","history","origin","rootPath","isClient","sessionId","resolveMiddleware","combinedReducers","router","routerReducer","readModels","jwt","appliedMiddlewares","applyMiddleware","composedEnhancers","compose","store","run","error","console"],"mappings":";;;;;;;;;AAAA;;AAMA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,OAed;AAAA,wBAdJC,KAcI;AAAA,uCATA,EASA;AAAA,uCAbFC,QAaE;AAAA,MAbFA,QAaE,oCAbS,EAaT;AAAA,yCAZFC,WAYE;AAAA,MAZFA,WAYE,sCAZY,EAYZ;AAAA,wCAXFC,SAWE;AAAA,MAXFA,SAWE,qCAXU,EAWV;AAAA,oCAVFC,KAUE;AAAA,MAVKC,WAUL,iCAVmB,EAUnB;AAAA,6BARJC,UAQI;AAAA,MARJA,UAQI,gCARS,EAQT;AAAA,mCAPJC,gBAOI;AAAA,MAPJA,gBAOI,sCAPeC,mCAOf;AAAA,+BANJC,YAMI;AAAA,MANJA,YAMI,kCANWC,SAMX;AAAA,8BALJC,WAKI;AAAA,MALJA,WAKI,iCALUD,SAKV;AAAA,MAJJE,OAII,QAJJA,OAII;AAAA,MAHJC,MAGI,QAHJA,MAGI;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,MADJC,QACI,QADJA,QACI;AACJ,MAAMC,SAAS,GAAG,oBAAlB;AAEA,MAAMC,iBAAiB,GAAG,4CAA1B;AAEA,MAAMC,gBAAgB,GAAG,8CACpBjB,QADoB;AAEvBkB,IAAAA,MAAM,EAAEC,+BAFe;AAGvBd,IAAAA,UAAU,EAAE,4CAAwBA,UAAxB,CAHW;AAIvBe,IAAAA,UAAU,EAAE,6CAJW;AAKvBC,IAAAA,GAAG,EAAE;AALkB,KAAzB;;AAQA,MAAMC,kBAAkB,GAAGC,sCACzB,wCAAiBZ,OAAjB,CADyB,EAEzBK,iBAFyB,SAGtBf,WAHsB,EAA3B;;AAMA,MAAMuB,iBAAiB,GAAGC,8BAAQH,kBAAR,SAA+BpB,SAA/B,EAA1B;;AAEA,MAAMwB,KAAK,GAAG,wBACZT,gBADY,EAEZT,YAFY,EAGZgB,iBAHY,CAAd;AAMAR,EAAAA,iBAAiB,CAACW,GAAlB,CAAsB;AACpBD,IAAAA,KAAK,EAALA,KADoB;AAEpBrB,IAAAA,UAAU,EAAVA,UAFoB;AAGpBO,IAAAA,MAAM,EAANA,MAHoB;AAIpBC,IAAAA,QAAQ,EAARA,QAJoB;AAKpBP,IAAAA,gBAAgB,EAAhBA,gBALoB;AAMpBS,IAAAA,SAAS,EAATA,SANoB;AAOpBL,IAAAA,WAAW,EAAXA,WAPoB;AAQpBI,IAAAA,QAAQ,EAARA,QARoB;AASpBV,IAAAA,WAAW,EAAXA;AAToB,GAAtB;;AAYA,MAAIM,WAAW,IAAI,IAAnB,EAAyB;AACvB,kDAAyBA,WAAzB,EAAsCgB,KAAtC,YACE;AACA,cAAAE,KAAK;AAAA,aAAIC,OAAO,CAACD,KAAR,CAAcA,KAAd,CAAJ;AAAA,KAFP;AAID;;AAED,SAAOF,KAAP;AACD,CA9DD;;eAgEe5B,W","sourcesContent":["import {\n  createStore as reduxCreateStore,\n  applyMiddleware,\n  combineReducers,\n  compose\n} from 'redux'\nimport { routerReducer, routerMiddleware } from 'react-router-redux'\nimport uuid from 'uuid/v4'\n\nimport createViewModelsReducer from './create_view_models_reducer'\nimport createReadModelsReducer from './create_read_models_reducer'\nimport createJwtReducer from './create_jwt_reducer'\nimport createResolveMiddleware from './create_resolve_middleware'\nimport syncJwtProviderWithStore from './sync_jwt_provider_with_store'\nimport emptySubscribeAdapter from './empty_subscribe_adapter'\n\nconst createStore = ({\n  redux: {\n    reducers = {},\n    middlewares = [],\n    enhancers = [],\n    sagas: customSagas = []\n  } = {},\n  viewModels = [],\n  subscribeAdapter = emptySubscribeAdapter,\n  initialState = undefined,\n  jwtProvider = undefined,\n  history,\n  origin,\n  rootPath,\n  isClient\n}) => {\n  const sessionId = uuid()\n\n  const resolveMiddleware = createResolveMiddleware()\n\n  const combinedReducers = combineReducers({\n    ...reducers,\n    router: routerReducer,\n    viewModels: createViewModelsReducer(viewModels),\n    readModels: createReadModelsReducer(),\n    jwt: createJwtReducer()\n  })\n\n  const appliedMiddlewares = applyMiddleware(\n    routerMiddleware(history),\n    resolveMiddleware,\n    ...middlewares\n  )\n\n  const composedEnhancers = compose(appliedMiddlewares, ...enhancers)\n\n  const store = reduxCreateStore(\n    combinedReducers,\n    initialState,\n    composedEnhancers\n  )\n\n  resolveMiddleware.run({\n    store,\n    viewModels,\n    origin,\n    rootPath,\n    subscribeAdapter,\n    sessionId,\n    jwtProvider,\n    isClient,\n    customSagas\n  })\n\n  if (jwtProvider != null) {\n    syncJwtProviderWithStore(jwtProvider, store).catch(\n      // eslint-disable-next-line no-console\n      error => console.error(error)\n    )\n  }\n\n  return store\n}\n\nexport default createStore\n"],"file":"create_store.js"}