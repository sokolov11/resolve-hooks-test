{"version":3,"sources":["../src/sync_jwt_provider_with_store.js"],"names":["syncJwtProviderWithStore","jwtProvider","store","get","jwtToken","jwt","getState","err","dispatch"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,wBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,iBAAOC,WAAP,EAAoBC,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAC3BD,WAD2B;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAENA,WAAW,CAACE,GAAZ,EAFM;;AAAA;AAEvBC,YAAAA,QAFuB;AAIzBC,YAAAA,GAJyB,GAInBH,KAAK,CAACI,QAAN,GAAiBD,GAJE;;AAK7B,gBAAI;AACFA,cAAAA,GAAG,GAAG,2BAAUD,QAAV,CAAN;AACD,aAFD,CAEE,OAAOG,GAAP,EAAY,CAAE;;AAEhB,gBAAI,qCAAgBL,KAAK,CAACI,QAAN,GAAiBD,GAAjC,MAA0C,qCAAgBA,GAAhB,CAA9C,EAAoE;AAClEH,cAAAA,KAAK,CAACM,QAAN,CAAe,wBAAUH,GAAV,CAAf;AACD;;AAX4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAxBL,wBAAwB;AAAA;AAAA;AAAA,GAA9B;;eAeeA,wB","sourcesContent":["import jwtDecode from 'jwt-decode'\nimport stableStringify from 'json-stable-stringify'\nimport { updateJwt } from './actions'\n\nconst syncJwtProviderWithStore = async (jwtProvider, store) => {\n  if (jwtProvider) {\n    const jwtToken = await jwtProvider.get()\n\n    let jwt = store.getState().jwt\n    try {\n      jwt = jwtDecode(jwtToken)\n    } catch (err) {}\n\n    if (stableStringify(store.getState().jwt) !== stableStringify(jwt)) {\n      store.dispatch(updateJwt(jwt))\n    }\n  }\n}\n\nexport default syncJwtProviderWithStore\n"],"file":"sync_jwt_provider_with_store.js"}