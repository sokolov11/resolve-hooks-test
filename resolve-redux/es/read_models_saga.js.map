{"version":3,"sources":["../src/read_models_saga.js"],"names":["take","getHash","createConnectionManager","createSagaManager","CONNECT_READMODEL","DISCONNECT_READMODEL","connectReadModelSaga","disconnectReadModelSaga","readModelsSaga","sagaArgs","connectionManager","wildcardSymbol","sagaManager","action","type","readModelName","resolverName","resolverArgs","sagaKey","start"],"mappings":";;;;;;;AAAA,SAASA,IAAT,QAAqB,oBAArB;AAEA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,uBAAP,MAAoC,6BAApC;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,SAASC,iBAAT,EAA4BC,oBAA5B,QAAwD,gBAAxD;AACA,OAAOC,oBAAP,MAAiC,2BAAjC;AACA,OAAOC,uBAAP,MAAoC,8BAApC;;AAEA,IAAMC,cAAc;AAAA;AAAA,yBAAG,SAAjBA,cAAiB,CAAUC,QAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfC,UAAAA,iBADe,GACKR,uBAAuB,CAAC;AAAES,YAAAA,cAAc,EAAE;AAAlB,WAAD,CAD5B;AAEfC,UAAAA,WAFe,GAEDT,iBAAiB,EAFhB;;AAAA;AAAA,eAId,IAJc;AAAA;AAAA;AAAA;;AAAA;AAKJ,iBAAMH,IAAI,CAAC,CAACI,iBAAD,EAAoBC,oBAApB,CAAD,CAAV;;AALI;AAKbQ,UAAAA,MALa;AAAA,wBAOXA,MAAM,CAACC,IAPI;AAAA,0CAQZV,iBARY,uBA4BZC,oBA5BY;AAAA;;AAAA;AASPU,UAAAA,aATO,GASuCF,MATvC,CASPE,aATO,EASQC,YATR,GASuCH,MATvC,CASQG,YATR,EASsBC,YATtB,GASuCJ,MATvC,CASsBI,YATtB;AAUTC,UAAAA,OAVS,GAUCjB,OAAO,CAAC;AACtBc,YAAAA,aAAa,EAAbA,aADsB;AAEtBC,YAAAA,YAAY,EAAZA,YAFsB;AAGtBC,YAAAA,YAAY,EAAZA;AAHsB,WAAD,CAVR;AAef,wCAAOL,WAAW,CAACO,KAAZ,MACFf,iBADE,GACkBc,OADlB,EAELZ,oBAFK,oBAIAG,QAJA;AAKHC,YAAAA,iBAAiB,EAAjBA,iBALG;AAMHE,YAAAA,WAAW,EAAXA,WANG;AAOHM,YAAAA,OAAO,EAAPA;AAPG,cASLL,MATK,CAAP;;AAfe;AAAA;;AAAA;AA6BPE,UAAAA,cA7BO,GA6BuCF,MA7BvC,CA6BPE,aA7BO,EA6BQC,aA7BR,GA6BuCH,MA7BvC,CA6BQG,YA7BR,EA6BsBC,aA7BtB,GA6BuCJ,MA7BvC,CA6BsBI,YA7BtB;AA8BTC,UAAAA,QA9BS,GA8BCjB,OAAO,CAAC;AACtBc,YAAAA,aAAa,EAAbA,cADsB;AAEtBC,YAAAA,YAAY,EAAZA,aAFsB;AAGtBC,YAAAA,YAAY,EAAZA;AAHsB,WAAD,CA9BR;AAmCf,wCAAOL,WAAW,CAACO,KAAZ,MACFd,oBADE,GACqBa,QADrB,EAELX,uBAFK,oBAIAE,QAJA;AAKHC,YAAAA,iBAAiB,EAAjBA,iBALG;AAMHE,YAAAA,WAAW,EAAXA,WANG;AAOHM,YAAAA,OAAO,EAAPA;AAPG,cASLL,MATK,CAAP;;AAnCe;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjBL,cAAiB;AAAA,CAAH,CAApB;;AAqDA,eAAeA,cAAf","sourcesContent":["import { take } from 'redux-saga/effects'\n\nimport getHash from './get_hash'\nimport createConnectionManager from './create_connection_manager'\nimport createSagaManager from './create_saga_manager'\nimport { CONNECT_READMODEL, DISCONNECT_READMODEL } from './action_types'\nimport connectReadModelSaga from './connect_read_model_saga'\nimport disconnectReadModelSaga from './disconnect_read_model_saga'\n\nconst readModelsSaga = function*(sagaArgs) {\n  const connectionManager = createConnectionManager({ wildcardSymbol: null })\n  const sagaManager = createSagaManager()\n\n  while (true) {\n    const action = yield take([CONNECT_READMODEL, DISCONNECT_READMODEL])\n\n    switch (action.type) {\n      case CONNECT_READMODEL: {\n        const { readModelName, resolverName, resolverArgs } = action\n        const sagaKey = getHash({\n          readModelName,\n          resolverName,\n          resolverArgs\n        })\n        yield* sagaManager.start(\n          `${CONNECT_READMODEL}${sagaKey}`,\n          connectReadModelSaga,\n          {\n            ...sagaArgs,\n            connectionManager,\n            sagaManager,\n            sagaKey\n          },\n          action\n        )\n        break\n      }\n      case DISCONNECT_READMODEL: {\n        const { readModelName, resolverName, resolverArgs } = action\n        const sagaKey = getHash({\n          readModelName,\n          resolverName,\n          resolverArgs\n        })\n        yield* sagaManager.start(\n          `${DISCONNECT_READMODEL}${sagaKey}`,\n          disconnectReadModelSaga,\n          {\n            ...sagaArgs,\n            connectionManager,\n            sagaManager,\n            sagaKey\n          },\n          action\n        )\n        break\n      }\n      default:\n    }\n  }\n}\n\nexport default readModelsSaga\n"],"file":"read_models_saga.js"}