{"version":3,"sources":["../src/create_store.js"],"names":["createStore","reduxCreateStore","applyMiddleware","combineReducers","compose","routerReducer","routerMiddleware","uuid","createViewModelsReducer","createReadModelsReducer","createJwtReducer","createResolveMiddleware","syncJwtProviderWithStore","emptySubscribeAdapter","redux","reducers","middlewares","enhancers","sagas","customSagas","viewModels","subscribeAdapter","initialState","undefined","jwtProvider","history","origin","rootPath","isClient","sessionId","resolveMiddleware","combinedReducers","router","readModels","jwt","appliedMiddlewares","composedEnhancers","store","run","error","console"],"mappings":";;;;;;AAAA,SACEA,WAAW,IAAIC,gBADjB,EAEEC,eAFF,EAGEC,eAHF,EAIEC,OAJF,QAKO,OALP;AAMA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,oBAAhD;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAEA,OAAOC,uBAAP,MAAoC,8BAApC;AACA,OAAOC,uBAAP,MAAoC,8BAApC;AACA,OAAOC,gBAAP,MAA6B,sBAA7B;AACA,OAAOC,uBAAP,MAAoC,6BAApC;AACA,OAAOC,wBAAP,MAAqC,gCAArC;AACA,OAAOC,qBAAP,MAAkC,2BAAlC;;AAEA,IAAMb,WAAW,GAAG,SAAdA,WAAc,OAed;AAAA,wBAdJc,KAcI;AAAA,uCATA,EASA;AAAA,uCAbFC,QAaE;AAAA,MAbFA,QAaE,oCAbS,EAaT;AAAA,yCAZFC,WAYE;AAAA,MAZFA,WAYE,sCAZY,EAYZ;AAAA,wCAXFC,SAWE;AAAA,MAXFA,SAWE,qCAXU,EAWV;AAAA,oCAVFC,KAUE;AAAA,MAVKC,WAUL,iCAVmB,EAUnB;AAAA,6BARJC,UAQI;AAAA,MARJA,UAQI,gCARS,EAQT;AAAA,mCAPJC,gBAOI;AAAA,MAPJA,gBAOI,sCAPeR,qBAOf;AAAA,+BANJS,YAMI;AAAA,MANJA,YAMI,kCANWC,SAMX;AAAA,8BALJC,WAKI;AAAA,MALJA,WAKI,iCALUD,SAKV;AAAA,MAJJE,OAII,QAJJA,OAII;AAAA,MAHJC,MAGI,QAHJA,MAGI;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,MADJC,QACI,QADJA,QACI;AACJ,MAAMC,SAAS,GAAGtB,IAAI,EAAtB;AAEA,MAAMuB,iBAAiB,GAAGnB,uBAAuB,EAAjD;AAEA,MAAMoB,gBAAgB,GAAG5B,eAAe,mBACnCY,QADmC;AAEtCiB,IAAAA,MAAM,EAAE3B,aAF8B;AAGtCe,IAAAA,UAAU,EAAEZ,uBAAuB,CAACY,UAAD,CAHG;AAItCa,IAAAA,UAAU,EAAExB,uBAAuB,EAJG;AAKtCyB,IAAAA,GAAG,EAAExB,gBAAgB;AALiB,KAAxC;AAQA,MAAMyB,kBAAkB,GAAGjC,eAAe,MAAf,UACzBI,gBAAgB,CAACmB,OAAD,CADS,EAEzBK,iBAFyB,SAGtBd,WAHsB,EAA3B;AAMA,MAAMoB,iBAAiB,GAAGhC,OAAO,MAAP,UAAQ+B,kBAAR,SAA+BlB,SAA/B,EAA1B;AAEA,MAAMoB,KAAK,GAAGpC,gBAAgB,CAC5B8B,gBAD4B,EAE5BT,YAF4B,EAG5Bc,iBAH4B,CAA9B;AAMAN,EAAAA,iBAAiB,CAACQ,GAAlB,CAAsB;AACpBD,IAAAA,KAAK,EAALA,KADoB;AAEpBjB,IAAAA,UAAU,EAAVA,UAFoB;AAGpBM,IAAAA,MAAM,EAANA,MAHoB;AAIpBC,IAAAA,QAAQ,EAARA,QAJoB;AAKpBN,IAAAA,gBAAgB,EAAhBA,gBALoB;AAMpBQ,IAAAA,SAAS,EAATA,SANoB;AAOpBL,IAAAA,WAAW,EAAXA,WAPoB;AAQpBI,IAAAA,QAAQ,EAARA,QARoB;AASpBT,IAAAA,WAAW,EAAXA;AAToB,GAAtB;;AAYA,MAAIK,WAAW,IAAI,IAAnB,EAAyB;AACvBZ,IAAAA,wBAAwB,CAACY,WAAD,EAAca,KAAd,CAAxB,WACE;AACA,cAAAE,KAAK;AAAA,aAAIC,OAAO,CAACD,KAAR,CAAcA,KAAd,CAAJ;AAAA,KAFP;AAID;;AAED,SAAOF,KAAP;AACD,CA9DD;;AAgEA,eAAerC,WAAf","sourcesContent":["import {\n  createStore as reduxCreateStore,\n  applyMiddleware,\n  combineReducers,\n  compose\n} from 'redux'\nimport { routerReducer, routerMiddleware } from 'react-router-redux'\nimport uuid from 'uuid/v4'\n\nimport createViewModelsReducer from './create_view_models_reducer'\nimport createReadModelsReducer from './create_read_models_reducer'\nimport createJwtReducer from './create_jwt_reducer'\nimport createResolveMiddleware from './create_resolve_middleware'\nimport syncJwtProviderWithStore from './sync_jwt_provider_with_store'\nimport emptySubscribeAdapter from './empty_subscribe_adapter'\n\nconst createStore = ({\n  redux: {\n    reducers = {},\n    middlewares = [],\n    enhancers = [],\n    sagas: customSagas = []\n  } = {},\n  viewModels = [],\n  subscribeAdapter = emptySubscribeAdapter,\n  initialState = undefined,\n  jwtProvider = undefined,\n  history,\n  origin,\n  rootPath,\n  isClient\n}) => {\n  const sessionId = uuid()\n\n  const resolveMiddleware = createResolveMiddleware()\n\n  const combinedReducers = combineReducers({\n    ...reducers,\n    router: routerReducer,\n    viewModels: createViewModelsReducer(viewModels),\n    readModels: createReadModelsReducer(),\n    jwt: createJwtReducer()\n  })\n\n  const appliedMiddlewares = applyMiddleware(\n    routerMiddleware(history),\n    resolveMiddleware,\n    ...middlewares\n  )\n\n  const composedEnhancers = compose(appliedMiddlewares, ...enhancers)\n\n  const store = reduxCreateStore(\n    combinedReducers,\n    initialState,\n    composedEnhancers\n  )\n\n  resolveMiddleware.run({\n    store,\n    viewModels,\n    origin,\n    rootPath,\n    subscribeAdapter,\n    sessionId,\n    jwtProvider,\n    isClient,\n    customSagas\n  })\n\n  if (jwtProvider != null) {\n    syncJwtProviderWithStore(jwtProvider, store).catch(\n      // eslint-disable-next-line no-console\n      error => console.error(error)\n    )\n  }\n\n  return store\n}\n\nexport default createStore\n"],"file":"create_store.js"}