{"version":3,"sources":["../src/create_context_based_connector.js"],"names":["React","Consumer","validate","defaultContext","origin","rootPath","staticPath","createContextBasedConnector","getContextBasedUrl","propsList","Component","arrayOfString","propsListSize","length","context","props","innerRef","staticBasedProps","propertyIndex","propertyName","propertyValue","Array","isArray","subProps","subPropertySize","subPropertyIndex","render","functionAsChildComponent","PureComponent"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,QAAT,QAAyB,mBAAzB;AACA,OAAO,KAAKC,QAAZ,MAA0B,YAA1B;AAEA,IAAMC,cAAc,GAAG;AAAEC,EAAAA,MAAM,EAAE,EAAV;AAAcC,EAAAA,QAAQ,EAAE,EAAxB;AAA4BC,EAAAA,UAAU,EAAE;AAAxC,CAAvB;;AAEA,IAAMC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAAC,kBAAkB;AAAA,SAAI,UAAAC,SAAS;AAAA,WAAI,UAAAC,SAAS,EAAI;AAAA;;AAClFR,MAAAA,QAAQ,CAACS,aAAT,CAAuBF,SAAvB,EAAkC,YAAlC;AAEA,UAAMG,aAAa,GAAGH,SAAS,CAACI,MAAhC;AAEA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,qFAC6B,UAAAC,OAAO,EAAI;AAAA,8BACL,MAAKC,KADA;AAAA,gBAC5BC,QAD4B,eAC5BA,QAD4B;AAAA,gBACfD,KADe;;AAGpC,gBAAME,gBAAgB,GAAG,EAAzB;;AAEA,iBACE,IAAIC,aAAa,GAAG,CADtB,EAEEA,aAAa,GAAGN,aAFlB,EAGEM,aAAa,EAHf,EAIE;AACA,kBAAMC,YAAY,GAAGV,SAAS,CAACS,aAAD,CAA9B;AACA,kBAAME,aAAa,GAAGL,KAAK,CAACI,YAAD,CAA3B;;AACA,kBAAIE,KAAK,CAACC,OAAN,CAAcF,aAAd,CAAJ,EAAkC;AAChC,oBAAMG,QAAQ,GAAG,EAAjB;AACA,oBAAMC,eAAe,GAAGJ,aAAa,CAACP,MAAtC;;AACA,qBACE,IAAIY,gBAAgB,GAAG,CADzB,EAEEA,gBAAgB,GAAGD,eAFrB,EAGEC,gBAAgB,EAHlB,EAIE;AACAF,kBAAAA,QAAQ,CAACE,gBAAD,CAAR,GAA6BjB,kBAAkB,CAC7CM,OAAO,IAAIX,cADkC,EAE7CiB,aAAa,CAACK,gBAAD,CAFgC,CAA/C;AAID;;AACDR,gBAAAA,gBAAgB,CAACE,YAAD,CAAhB,GAAiCI,QAAjC;AACD,eAdD,MAcO;AACLN,gBAAAA,gBAAgB,CAACE,YAAD,CAAhB,GAAiCX,kBAAkB,CACjDM,OAAO,IAAIX,cADsC,EAEjDiB,aAFiD,CAAnD;AAID;AACF;;AAED,mBAAO,oBAAC,SAAD,eAAeL,KAAf,EAA0BE,gBAA1B;AAA4C,cAAA,GAAG,EAAED;AAAjD,eAAP;AACD,WApCH;;AAAA;AAAA;;AAAA;;AAAA,eAsCEU,MAtCF,GAsCE,kBAAS;AACP,iBAAO,oBAAC,QAAD,QAAW,KAAKC,wBAAhB,CAAP;AACD,SAxCH;;AAAA;AAAA,QAA2C3B,KAAK,CAAC4B,aAAjD;AA0CD,KA/CkE;AAAA,GAAb;AAAA,CAAtD;;AAiDA,eAAerB,2BAAf","sourcesContent":["import React from 'react'\n\nimport { Consumer } from './resolve_context'\nimport * as validate from './validate'\n\nconst defaultContext = { origin: '', rootPath: '', staticPath: 'static' }\n\nconst createContextBasedConnector = getContextBasedUrl => propsList => Component => {\n  validate.arrayOfString(propsList, 'Props list')\n\n  const propsListSize = propsList.length\n\n  return class ContextBasedComponent extends React.PureComponent {\n    functionAsChildComponent = context => {\n      const { innerRef, ...props } = this.props\n\n      const staticBasedProps = {}\n\n      for (\n        let propertyIndex = 0;\n        propertyIndex < propsListSize;\n        propertyIndex++\n      ) {\n        const propertyName = propsList[propertyIndex]\n        const propertyValue = props[propertyName]\n        if (Array.isArray(propertyValue)) {\n          const subProps = []\n          const subPropertySize = propertyValue.length\n          for (\n            let subPropertyIndex = 0;\n            subPropertyIndex < subPropertySize;\n            subPropertyIndex++\n          ) {\n            subProps[subPropertyIndex] = getContextBasedUrl(\n              context || defaultContext,\n              propertyValue[subPropertyIndex]\n            )\n          }\n          staticBasedProps[propertyName] = subProps\n        } else {\n          staticBasedProps[propertyName] = getContextBasedUrl(\n            context || defaultContext,\n            propertyValue\n          )\n        }\n      }\n\n      return <Component {...props} {...staticBasedProps} ref={innerRef} />\n    }\n\n    render() {\n      return <Consumer>{this.functionAsChildComponent}</Consumer>\n    }\n  }\n}\n\nexport default createContextBasedConnector\n"],"file":"create_context_based_connector.js"}