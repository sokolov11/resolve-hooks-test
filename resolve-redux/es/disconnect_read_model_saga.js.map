{"version":3,"sources":["../src/disconnect_read_model_saga.js"],"names":["put","getHash","dropReadModelState","CONNECT_READMODEL","disconnectReadModelSaga","sagaArgs","action","connectionManager","sagaManager","sagaKey","readModelName","resolverName","resolverArgs","connectionId","removeConnection","connectionName","removedConnections","length","stop"],"mappings":";AAAA,SAASA,GAAT,QAAoB,oBAApB;AAEA,OAAOC,OAAP,MAAoB,YAApB;AACA,SAASC,kBAAT,QAAmC,WAAnC;AACA,SAASC,iBAAT,QAAkC,gBAAlC;;AAEA,IAAMC,uBAAuB;AAAA;AAAA,yBAAG,SAA1BA,uBAA0B,CAAUC,QAAV,EAAoBC,MAApB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACtBC,UAAAA,iBADsB,GACsBF,QADtB,CACtBE,iBADsB,EACHC,WADG,GACsBH,QADtB,CACHG,WADG,EACUC,OADV,GACsBJ,QADtB,CACUI,OADV;AAGtBC,UAAAA,aAHsB,GAGwBJ,MAHxB,CAGtBI,aAHsB,EAGPC,YAHO,GAGwBL,MAHxB,CAGPK,YAHO,EAGOC,YAHP,GAGwBN,MAHxB,CAGOM,YAHP;AAKxBC,UAAAA,YALwB,QAKNZ,OAAO,CAACU,YAAD,CALD,GAKkBV,OAAO,CAACW,YAAD,CALzB;AAAA,kCAOCL,iBAAiB,CAACO,gBAAlB,CAAmC;AAChEC,YAAAA,cAAc,EAAEL,aADgD;AAEhEG,YAAAA,YAAY,EAAZA;AAFgE,WAAnC,CAPD,EAOtBG,kBAPsB,yBAOtBA,kBAPsB;;AAAA,gBAW1BA,kBAAkB,CAACC,MAAnB,KAA8B,CAXJ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAe9B,wCAAOT,WAAW,CAACU,IAAZ,MAAoBf,iBAApB,GAAwCM,OAAxC,CAAP;;AAf8B;AAAA;AAiB9B,iBAAMT,GAAG,CAACE,kBAAkB,CAACQ,aAAD,EAAgBC,YAAhB,EAA8BC,YAA9B,CAAnB,CAAT;;AAjB8B;AAAA;AAAA;AAAA;AAAA;AAAA,KAA1BR,uBAA0B;AAAA,CAAH,CAA7B;;AAoBA,eAAeA,uBAAf","sourcesContent":["import { put } from 'redux-saga/effects'\n\nimport getHash from './get_hash'\nimport { dropReadModelState } from './actions'\nimport { CONNECT_READMODEL } from './action_types'\n\nconst disconnectReadModelSaga = function*(sagaArgs, action) {\n  const { connectionManager, sagaManager, sagaKey } = sagaArgs\n\n  const { readModelName, resolverName, resolverArgs } = action\n\n  const connectionId = `${getHash(resolverName)}${getHash(resolverArgs)}`\n\n  const { removedConnections } = connectionManager.removeConnection({\n    connectionName: readModelName,\n    connectionId\n  })\n  if (removedConnections.length !== 1) {\n    return\n  }\n\n  yield* sagaManager.stop(`${CONNECT_READMODEL}${sagaKey}`)\n\n  yield put(dropReadModelState(readModelName, resolverName, resolverArgs))\n}\n\nexport default disconnectReadModelSaga\n"],"file":"disconnect_read_model_saga.js"}